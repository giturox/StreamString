    type
      TMyObject = class
      public
        Name: string;
        procedure SaveToStream(AStream: TStream);
        procedure LoadFromStream(AStream: TStream);
      end;
     
    procedure TMyObject.SaveToStream(AStream: TStream);
    var
      Len: Integer;
    begin
      Len := Length(Name);
      AStream.Write(Len, SizeOf(Len));
      AStream.Write(PChar(Name)^, Len);
    end;
     
    procedure TMyObject.LoadFromStream(AStream: TStream);
    var
      Len: Integer;
    begin
      AStream.Read(Len, SizeOf(Len));
      SetString(Name, PChar(nil), Len);
      AStream.Read(PChar(Name)^, Len);
    end;
